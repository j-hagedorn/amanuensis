---
title: "Directions"
output: html_notebook
---

```{r load_libs, message=FALSE, warning=FALSE, include=FALSE}
library(tidyverse); library(magrittr); library(stringr); library(tidytext); library(stringdist)
```

#### Get books

from *[Philosophical transactions of the Royal Society](https://archive.org/details/philosophicaltransactions)* 

```{r get_books, message=FALSE, warning=FALSE, include=FALSE}

# On the Construction of the Heavens. By William Herschel, Esq. 
# Philosophical Transactions of the Royal Society of London (1776-1886).
construct_heaven <- 
  readLines("https://ia600504.us.archive.org/12/items/philtrans02233147/02233147_djvu.txt",skipNul = T) %>% 
  as.data.frame() %>%
  rename_all(funs(gsub(.)), pattern = ".", replacement = "text") %>%
  mutate(
    title = "On the Construction of the Heavens",
    author = "Herschel, William"
  )

# On the Nature and Construction of the Sun and Fixed Stars. By William Herschel
# Philosophical Transactions of the Royal Society of London (1776-1886).
construct_sun <- 
  readLines("https://ia800500.us.archive.org/16/items/philtrans08894694/08894694_djvu.txt",skipNul = T) %>% 
  as.data.frame() %>%
  rename_all(funs(gsub(.)), pattern = ".", replacement = "text") %>%
  mutate(
    title = "On the Nature and Construction of the Sun and Fixed Stars",
    author = "Herschel, William"
  )

# Catalogue of a Second Thousand of New Nebulae and Clusters of Stars; 
# With a Few Introductory Remarks on the Construction of the Heavens. 
# By William Herschel, W Philosophical Transactions of the Royal Society of London (1789).
construct_nebulae <- 
  readLines("https://ia800701.us.archive.org/11/items/philtrans08124673/08124673_djvu.txt",skipNul = T) %>% 
  as.data.frame() %>%
  rename_all(funs(gsub(.)), pattern = ".", replacement = "text") %>%
  mutate(
    title = "Catalogue of a Second Thousand of New Nebulae and Clusters of Stars With a Few Introductory Remarks on the Construction of the Heavens",
    author = "Herschel, William"
  )

construct_heaven %<>%
  bind_rows(construct_sun) %>%
  bind_rows(construct_nebulae) %>%
  mutate(
    text = str_trim(text),
    # Replace numbers and spaces with ""
    text = str_replace(text,"^[\\d\\s]+$",""),
    text = str_replace_all(text,"[[:punct:]]|Â|^|>","")
  ) %>%
  filter(text != "") %>%
  filter(nchar(text) > 10)

rm(construct_sun); rm(construct_nebulae)

```

from *[the Endeavor Journals of Joseph Banks](http://www2.sl.nsw.gov.au/banks/series_03/03_view.cfm)*

```{r endeavor, message=FALSE, warning=FALSE, include=FALSE}

temp <- tempfile()
download.file("http://www2.sl.nsw.gov.au/banks/download/endevtxt.zip",temp)
endeavor <- readLines(unz(temp, "Endeav.txt"))
unlink(temp)
endeavor %<>% as.data.frame()

```


#### Find patterns

```{r}

make_verbs <- c("construct","make","measure","align","destroy","move","rest",
                "build","add","support","bring","develop","extend","form",
                "render","trace","draw")

unnest_heavens <- 
  construct_heaven %>%
  unnest_tokens(words,text,"ngrams",n = 5) %>%
  mutate(
    prep = grepl(
      pattern = paste0("^",paste(prepositions$word, collapse = " |^")), words
    ),
    make = grepl(
      pattern = paste0("^",paste(make_verbs, collapse = " |^")), words
    )
  ) %>%
  filter(prep == T | make == T)


```

given to it i see
by some agitation or other in a row a beautiful

of the landscape are situated
of the shining fluid added
by the sun upon bodies
on the surface of
of the sun we shall

of explaining it by mountains, by admitting large mountains


from the limb was the
of the shelving side instead
to the edge of the
below the surface of the
of which we rarely see

on the moon the unenlightened

on the sun to which I have joined
to be divided into two


in the edipse of the
from analogy 
for the illumination which remains

of these appearances i carefully
as i approached the milky
by a volcanic explosion violently
on its return would gradually
in diameter which is equal
up the vacancy and thus

from them when all the

as far from us 
as far as we can

as vivid the diameters
after all we can hardly
into a pretty narrow compass
in this paper 

with regard to the physical
with materials for examining
in possession of a list
to no more than what
than what is sufficiently evident
of light and luminous vapours
of such fluids as I decompose

on our earth the heat
as could poffibly be crowded
to exprefs in the fhorteft
as its satellite we pafs
as one full grown plant
of plants or animals in
for the purposes of animal

on I need not fear

from the generation of clouds
of a crookedly branching nebula
next section with one in
without attempting to draw

in the suit drawn pretty
of ftars that would point
as difficultly refolvable or colourlefs
over with whitish and unequally

within a fphere drawn round
to render this point
of instruction our clouds are
about his little globe that
about the dark part
against the moons being
around him the whole univerfe
as a cone
in this grand chemical as may be urged
under the shape of dark
under which we have

as pretty closely scattered fmall
as the minute parts of
as i can think of 
as nature never exposes
as i have found
for the dark ground

from a point not lefs

to difcover the places where
near the margin that the
near to an extinction of
above the rough surface
above conftruion as the fquare
upon the ground the birds
out of a thoufand fttuations

throughout the whole the laws
of the unevenness of the

to be perceived without the
to the naked about

on an ifland unlefs we
for instance which my sister
to be opaque masses
like the shrivelled elevations upon

about a center or about all the spots
about 2 minutes about 48 extent about 30 or 40 degrees about 60 or 70 generally about 27 long and in

trace the operations 
form this again we reft
form confining 
render this point
draw additional
draw upon myfelf 
add that the idea of
extend the weight of my
form what has been faid
make fome ufe of this
extend equally to them all
form the letter s 
form a crofs
build worlds of our own
add obfervation to obfervation 
make this appear 
make a detached link
form an opening in the
trace the caufe 
make it almoft improbable
add the place
bring some of thã¢ solar
rest about all the spots
bring on a subdivision
support the ideas
support these stars
bring down the lustre of
make them mere useless brilhant
form the unevenness arising 